# ColorBit mining

Игра про майнинг с множеством интересных механик: покупка новых и б/у карт, их продажа, сборка ригов из отдельных комплектующих и, конечно, возможность спалить ваш дом)

----
### Для себя
#### Продавцы:
Нужно сделать возможность добавлять разных продавцов: от днс и авито до алиэкспресс.
- У каждого продавца свой ассортимент, который можно менять в админке.
- Магазин может предоставлять и не предоставлять гарантию
- Скорость доставки: в днс, например, можно сразу же забрать заказ, а с алиэкспресс нужно долго ждать
- Нужно как-то добавить возможность пользователям продавать их комплектующие на авито, это будет стимулировать игровую экономику
- У разных продавцов должно быть своё оформление магазина: хотя бы логотип вверху страницы. И, может, своя цветовая схема
- 

#### Продукты (комплектующие):
Тут всё сложнее...
Во-первых, список нужных комплектующих:
- Видеокарта
- Процессор вместе с материнской платой
- Каркас
- Райзер
- Блок питания
- ОЗУ

Попробуем всё это обобщить, чтобы добавить в одну таблицу `Products`

`name="1050ti""`, `type="GPU"`, ``

| Name          | Type                        | specifications               | price  |
| ------------- |:---------------------------:| ----------------------------:| ------:|
| 1050ti        | GPU(create GPU instance)    | {VRAM: 2GB, power: 100W}     | 20000р |
| Hyperx ddr4   | RAM(create RAM instance)    | {size: 8GB, frequency: 2666} | 5000р  |

И это нереально неудобно. Ибо сделать поиск в mySQL будет сложнее. Но с другой стороны.. Удобно создавать инстасы классов.

Вариант с сотней таблиц такой себе.

Самый, наверное, удобный вариант создать таблицу `Product`, где будут все поля: от видеокарты, от бп, от памяти и тд.
А ненужные обозначать, как null.

| Name          | Type                        | VRAM | power | size | frequency | price  |
| ------------- |:---------------------------:| ----:| -----:| ----:| ---------:| ------:|
| 1050ti        | GPU(create GPU instance)    | 2GB  | 100W  | NULL | NULL      | 20000р |
| Hyperx ddr4   | RAM(create RAM instance)    | NULL | 5W    | 8GB  | 2666      | 5000р  |

Это вполне удобно. В админке исходя из типа комплектующих давать заполнять нужные поля.

#### Поля спецификаций для Видеокарты:
- Name, manufacturer (amd or nvidia), vendor(asus, palit, msi)
- VRAM
- TDP
- Power consumption
- Count fans
- Fans efficiency (чтобы считать нагрев)
- VRAM frequency
- VRAM Type (GDDR5, GDDR6X)
- Work time (из магазина 0, с авито, например, 200 часов)
- Wear (износ - зависит от времени работы, температуры, загрузки)

#### Поля спецификаций для Платформы:
- Processor name, Motherboard name,
- TDP
- Fan TDP (Можно будет посчитать, хватает ли кулера для проца)
- Cors count
- Threads count
- Processor frequency (Чтобы рассчитывать, хватает ли процессор для видеокарты)
- CPU power consumption
- Number of RAM slots
- Work time
- Wear (износ - зависит от времени работы, температуры, загрузки)

#### Поля спецификаций для БП:
- Power (500W)
- Efficiency (bronze, platinum, none)
- Work time
- Wear (износ - зависит от времени работы, температуры, загрузки)

#### Поля спецификаций для ОЗУ:
- Frequency
- Power? (2-5W)
- Memory size
- Channels (1 канал, 2 канала)?

#### Поля спецификаций для Каркаса:
- Material (дерево, алюминь)
- Max GPUs count
- Critical temperature (Температура, при которой каркас МОЖЕТ загорется. То есть с некоторым шансом)

Райзеры отличаться не будут. Просто на Риге сделать кнопку купить доп. Райзер.

### Поломки
В админке к каждой железке можно галочкой отметить проблемы и частые поломки.
То есть можно указать, что данная платформа имеет слабую зону VRM, которая взрывается при температуре выше 90 градусов

В БД будет отдельная таблица с названием проблем. Еще таблица, в которой привязывается модель железки к определенным поломкам + шанс возникновения поломки, условие возникновения поломки (перегрев, использование на >90%)

К тому же будут стандартные для комплектующих поломки.
Если бп работает на пределе больше 24 часов, к примеру, то он ломается.
Или если не чистить ферму от пыли больше 100 часов, то она может сгореть)

После поломки можно нажать на кнопку "починить" или "вызвать мастера". Шанс восстановления фермы будет зависеть от шанса, который будет прописан в таблице для поломок.
Если есть гарантия, то восстановление - 100%

## ИТОГО

В админке создаём железку, привязываем к ней определенные поломки.
Добавляем созданные комплектующие в магазин в определенном кол-ве, чтобы был реализм)
Устанавливаем цену в магазине.

Потом пользователь покупает детали для рига. Таблица с ригами пользователей заполняется деталями.
Если чего-то не хватает - предлагаем пользователю купить недостающие детали.
Если все готово, можно включить (Можно добавить маааленький шанс того, что при первом включении всё взорвется к чертям собачьим, но это мысли в слух).

### После запуска рига...
Нужно постоянно считать хешрейт, температуру, износ, время работы.
Делать это часто на сервере - затратно.


#### Как работает покупка
- Одна таблица со всеми возможными комплектующими.
- Таблица, связывающая магазин и комплектующие - ассортимент магазина по сути.
- При покупке id комплектующего, `work_time`, `wear`, `warranty` добавляются в таблицу user_parts.
Потом пользователь сможет продать это на авито, а другой пользователь получить железку, у которой есть какое-то время работы.
  
### Нужные таблицы
- users
- parts
- shops
- shop_part
- user_shop_part (stocks, purchased)
- cart
- wishlist
- rigs

